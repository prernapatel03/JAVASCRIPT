<html>
    <body>
        <input type="checkbox" onclick="toggle()" id="mainInp" /> Select All<br />
        <div onclick="checking()">
          <input type="checkbox" class="input" value="bar1" /> Bar 1<br />
          <input type="checkbox" class="input" value="bar2" /> Bar 2<br />
          <input type="checkbox" class="input" value="bar3" /> Bar 3<br />
          <input type="checkbox" class="input" value="bar4" /> Bar 4<br />
        </div>
        
</body>
<script>
     function toggle() {
    var checkboxes = document.querySelectorAll('.input');
    var mainCheckbox = document.getElementById('mainInp');
    checkboxes.forEach(function(checkbox) {
      checkbox.checked = mainCheckbox.checked;
    });
  }

  function checking() {
    var checkboxes = document.querySelectorAll('.input');
    var mainCheckbox = document.getElementById('mainInp');

            mainCheckbox.checked =  Array.from(checkboxes).every(
                function mainFun(e){
                            return e.checked;
                }
              )

              // console.log( typeof Array.from(checkboxes))
  }
</script>


</html>
